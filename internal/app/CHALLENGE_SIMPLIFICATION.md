# Challenge API ç®€åŒ–è¯´æ˜

## ğŸ“ ç”¨æˆ·éœ€æ±‚

æ ¹æ®ç”¨æˆ·åé¦ˆï¼Œé¢˜ç›®ç³»ç»Ÿè¿›è¡Œäº†ç®€åŒ–ï¼š

1. âŒ **ä¸éœ€è¦éªŒè¯ Flag** - ç”¨æˆ·æäº¤åç›´æ¥æ¥å—
2. âŒ **ä¸éœ€è¦æäº¤è®°å½•åŠŸèƒ½** - æ— éœ€æŸ¥çœ‹å†å²æäº¤
3. âŒ **ä¸éœ€è¦æ’è¡Œæ¦œåŠŸèƒ½** - æ— éœ€æ’åç»Ÿè®¡
4. âœ… **ç”¨æˆ·æäº¤åæ‰€æœ‰äººå¯è§** - ä¿ç•™é¢˜ç›®è§£å†³çŠ¶æ€çš„å¯è§æ€§

## ğŸ”§ å·²åšçš„ä¿®æ”¹

### 1. Flag æäº¤ç®€åŒ–

**ä¿®æ”¹æ–‡ä»¶**: `internal/server/challenge_manager.go`

```go
// SubmitFlag ç›´æ¥æ¥å—æ‰€æœ‰Flagï¼Œä¸è¿›è¡ŒéªŒè¯
func (cm *ChallengeManager) SubmitFlag(challengeID, memberID, flag string) error {
    // ä¸éªŒè¯Flagï¼Œç›´æ¥æ ‡è®°ä¸ºå·²è§£å†³
    submission.IsCorrect = true
    // ...
}
```

**ç‰¹ç‚¹**:
- âœ… æ‰€æœ‰æäº¤çš„Flagéƒ½è¢«æ¥å—
- âœ… è‡ªåŠ¨æ›´æ–°é¢˜ç›®çŠ¶æ€ä¸º"å·²è§£å†³"
- âœ… å°†æäº¤è€…æ·»åŠ åˆ°SolvedByåˆ—è¡¨
- âœ… å¹¿æ’­è§£é¢˜æ¶ˆæ¯ï¼Œæ‰€æœ‰äººå¯è§

### 2. ç¦ç”¨çš„åŠŸèƒ½

#### 2.1 æäº¤è®°å½•åŠŸèƒ½

```go
// GetChallengeSubmissions è·å–é¢˜ç›®æäº¤è®°å½•ï¼ˆå·²ç¦ç”¨ï¼‰
func (a *App) GetChallengeSubmissions(challengeID string) Response {
    return NewErrorResponse("not_supported", "ä¸æ”¯æŒæäº¤è®°å½•åŠŸèƒ½", "")
}
```

#### 2.2 æ’è¡Œæ¦œåŠŸèƒ½

```go
// GetLeaderboard è·å–æ’è¡Œæ¦œï¼ˆå·²ç¦ç”¨ï¼‰
func (a *App) GetLeaderboard() Response {
    return NewErrorResponse("not_supported", "ä¸æ”¯æŒæ’è¡Œæ¦œåŠŸèƒ½", "")
}
```

#### 2.3 ç»Ÿè®¡åŠŸèƒ½

```go
// GetChallengeStats è·å–é¢˜ç›®ç»Ÿè®¡ä¿¡æ¯ï¼ˆå·²ç¦ç”¨ï¼‰
func (a *App) GetChallengeStats() Response {
    return NewErrorResponse("not_supported", "ä¸æ”¯æŒç»Ÿè®¡åŠŸèƒ½", "")
}
```

#### 2.4 æç¤ºåŠŸèƒ½

```go
// AddHint æ·»åŠ æç¤ºï¼ˆå·²ç¦ç”¨ï¼‰
func (a *App) AddHint(req AddHintRequest) Response {
    return NewErrorResponse("not_supported", "ä¸æ”¯æŒæç¤ºåŠŸèƒ½", "")
}

// UnlockHint è§£é”æç¤ºï¼ˆå·²ç¦ç”¨ï¼‰
func (a *App) UnlockHint(challengeID, hintID string) Response {
    return NewErrorResponse("not_supported", "ä¸æ”¯æŒæç¤ºåŠŸèƒ½", "")
}
```

### 3. ä¿ç•™çš„æ ¸å¿ƒåŠŸèƒ½

#### âœ… é¢˜ç›®ç®¡ç†

- `CreateChallenge()` - åˆ›å»ºé¢˜ç›®
- `GetChallenges()` - è·å–é¢˜ç›®åˆ—è¡¨
- `GetChallenge()` - è·å–å•ä¸ªé¢˜ç›®
- `UpdateChallenge()` - æ›´æ–°é¢˜ç›®
- `DeleteChallenge()` - åˆ é™¤é¢˜ç›®

#### âœ… é¢˜ç›®åˆ†é…

- `AssignChallenge()` - åˆ†é…é¢˜ç›®ç»™æˆå‘˜

#### âœ… Flagæäº¤ï¼ˆç®€åŒ–ç‰ˆï¼‰

- `SubmitFlag()` - æäº¤Flagï¼ˆä¸éªŒè¯ï¼Œç›´æ¥æ¥å—ï¼‰
- æäº¤åè‡ªåŠ¨å¹¿æ’­ï¼Œæ‰€æœ‰äººå¯è§

#### âœ… è¿›åº¦æ›´æ–°

- `UpdateChallengeProgress()` - æ›´æ–°é¢˜ç›®è¿›åº¦

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åˆ›å»ºé¢˜ç›®

```javascript
// å‰ç«¯è°ƒç”¨
const response = await CreateChallenge({
    title: "Webé¢˜ç›®ç¤ºä¾‹",
    description: "æ‰¾åˆ°éšè—çš„Flag",
    category: "Web",
    difficulty: "Easy",
    points: 100,
    flag: "flag{example}" // å¯é€‰ï¼Œä¸ä¼šç”¨äºéªŒè¯
});
```

### æäº¤ Flag

```javascript
// å‰ç«¯è°ƒç”¨
const response = await SubmitFlag({
    challenge_id: "challenge-id",
    flag: "ä»»æ„å†…å®¹" // æ— éœ€éªŒè¯ï¼Œç›´æ¥æ¥å—
});

// å“åº”
{
    success: true,
    is_correct: true,
    message: "Flagå·²æäº¤ï¼ŒæœåŠ¡å™¨å°†æ¥å—",
    points: 100
}
```

### æŸ¥çœ‹é¢˜ç›®çŠ¶æ€

```javascript
// è·å–é¢˜ç›®åˆ—è¡¨
const challenges = await GetChallenges();

// æ¯ä¸ªé¢˜ç›®åŒ…å«:
{
    id: "...",
    title: "...",
    is_solved: true,
    solved_by: ["member-1", "member-2"], // æ‰€æœ‰è§£å†³è€…
    // ...
}
```

## ğŸ“Š æ•°æ®æµ

```
ç”¨æˆ·æäº¤Flag
    â†“
æœåŠ¡ç«¯ç›´æ¥æ¥å—
    â†“
æ›´æ–°é¢˜ç›®çŠ¶æ€ï¼ˆå·²è§£å†³ï¼‰
    â†“
æ·»åŠ åˆ°SolvedByåˆ—è¡¨
    â†“
å¹¿æ’­è§£é¢˜æ¶ˆæ¯
    â†“
æ‰€æœ‰å®¢æˆ·ç«¯æ›´æ–°æ˜¾ç¤º
```

## ğŸ”„ ä¸å…¶ä»–æ¨¡å—çš„å…³ç³»

### Server æ¨¡å—

- âœ… å®ç°äº†æ‰€æœ‰å¿…è¦çš„åŒ…è£…æ–¹æ³•
- âœ… ç®€åŒ–äº†FlagéªŒè¯é€»è¾‘
- âŒ ç§»é™¤äº†æ’è¡Œæ¦œå’Œç»Ÿè®¡æ–¹æ³•

### Client æ¨¡å—

- âœ… å¯ä»¥æäº¤Flag
- âœ… æ¥æ”¶è§£é¢˜å¹¿æ’­
- âœ… æ›´æ–°æœ¬åœ°é¢˜ç›®çŠ¶æ€
- âŒ ä¸éœ€è¦è·å–æ’è¡Œæ¦œ

### æ•°æ®åº“

- âœ… ä¿å­˜é¢˜ç›®ä¿¡æ¯
- âœ… ä¿å­˜è§£å†³çŠ¶æ€
- âŒ ä¸ä¿å­˜è¯¦ç»†æäº¤è®°å½•

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§**: ç”±äºä¸éªŒè¯Flagï¼Œä»»ä½•äººéƒ½å¯ä»¥æ ‡è®°é¢˜ç›®ä¸ºå·²è§£å†³
2. **å†å²è®°å½•**: æ— æ³•æŸ¥çœ‹è°åœ¨ä»€ä¹ˆæ—¶å€™æäº¤äº†ä»€ä¹ˆFlag
3. **æ’å**: æ— æ³•ç”ŸæˆåŸºäºåˆ†æ•°çš„æ’è¡Œæ¦œ
4. **å®¡è®¡**: æ²¡æœ‰è¯¦ç»†çš„æ“ä½œå®¡è®¡æ—¥å¿—

è¿™äº›éƒ½æ˜¯æ ¹æ®ç”¨æˆ·éœ€æ±‚æœ‰æ„ç®€åŒ–çš„åŠŸèƒ½ã€‚

## ğŸš€ ä¸‹ä¸€æ­¥

å¦‚æœæœªæ¥éœ€è¦æ¢å¤è¿™äº›åŠŸèƒ½ï¼š

1. **FlagéªŒè¯**: åœ¨ `SubmitFlag()` ä¸­æ·»åŠ éªŒè¯é€»è¾‘
2. **æäº¤è®°å½•**: æ¢å¤ `GetChallengeSubmissions()` çš„å®ç°
3. **æ’è¡Œæ¦œ**: æ¢å¤ `GetLeaderboard()` å’Œç›¸å…³è®¡ç®—é€»è¾‘
4. **ç»Ÿè®¡**: æ¢å¤ `GetChallengeStats()` çš„å®ç°

æ‰€æœ‰åº•å±‚æ•°æ®ç»“æ„éƒ½å·²ç»å‡†å¤‡å¥½ï¼Œåªéœ€è¦åœ¨APIå±‚æ¢å¤ç›¸åº”çš„æŸ¥è¯¢å’Œå¤„ç†é€»è¾‘å³å¯ã€‚

